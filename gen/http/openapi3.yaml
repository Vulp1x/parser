openapi: 3.0.3
info:
  title: api for parsing instagram
  version: "1.0"
servers:
  - url: /
    description: Default server for parser-api
paths:
  /api/datasets/:
    get:
      tags:
        - datasets_service
      summary: list datasets datasets_service
      description: получить все задачи для текущего пользователя
      operationId: datasets_service#list datasets
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Dataset'
                example:
                  - bloggers:
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                    commented_per_post: 2002815683
                    id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                    liked_per_post: 1742085052
                    posts_per_blogger: 2076719602
                    status: 6
                    title: Excepturi nihil illo.
                  - bloggers:
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                    commented_per_post: 2002815683
                    id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                    liked_per_post: 1742085052
                    posts_per_blogger: 2076719602
                    status: 6
                    title: Excepturi nihil illo.
              example:
                - bloggers:
                    - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                      id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      is_initial: false
                      user_id: 2467489778041992473
                      username: Et inventore molestiae.
                    - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                      id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      is_initial: false
                      user_id: 2467489778041992473
                      username: Et inventore molestiae.
                    - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                      id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      is_initial: false
                      user_id: 2467489778041992473
                      username: Et inventore molestiae.
                    - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                      id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      is_initial: false
                      user_id: 2467489778041992473
                      username: Et inventore molestiae.
                  commented_per_post: 2002815683
                  id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                  liked_per_post: 1742085052
                  posts_per_blogger: 2076719602
                  status: 6
                  title: Excepturi nihil illo.
                - bloggers:
                    - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                      id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      is_initial: false
                      user_id: 2467489778041992473
                      username: Et inventore molestiae.
                    - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                      id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      is_initial: false
                      user_id: 2467489778041992473
                      username: Et inventore molestiae.
                    - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                      id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      is_initial: false
                      user_id: 2467489778041992473
                      username: Et inventore molestiae.
                    - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                      id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      is_initial: false
                      user_id: 2467489778041992473
                      username: Et inventore molestiae.
                  commented_per_post: 2002815683
                  id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                  liked_per_post: 1742085052
                  posts_per_blogger: 2076719602
                  status: 6
                  title: Excepturi nihil illo.
                - bloggers:
                    - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                      id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      is_initial: false
                      user_id: 2467489778041992473
                      username: Et inventore molestiae.
                    - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                      id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      is_initial: false
                      user_id: 2467489778041992473
                      username: Et inventore molestiae.
                    - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                      id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      is_initial: false
                      user_id: 2467489778041992473
                      username: Et inventore molestiae.
                    - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                      id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      is_initial: false
                      user_id: 2467489778041992473
                      username: Et inventore molestiae.
                  commented_per_post: 2002815683
                  id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                  liked_per_post: 1742085052
                  posts_per_blogger: 2076719602
                  status: 6
                  title: Excepturi nihil illo.
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Incidunt ipsum reprehenderit et.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Dataset'
                example:
                  - bloggers:
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                    commented_per_post: 2002815683
                    id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                    liked_per_post: 1742085052
                    posts_per_blogger: 2076719602
                    status: 6
                    title: Excepturi nihil illo.
                  - bloggers:
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                    commented_per_post: 2002815683
                    id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                    liked_per_post: 1742085052
                    posts_per_blogger: 2076719602
                    status: 6
                    title: Excepturi nihil illo.
                  - bloggers:
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                    commented_per_post: 2002815683
                    id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                    liked_per_post: 1742085052
                    posts_per_blogger: 2076719602
                    status: 6
                    title: Excepturi nihil illo.
        "404":
          description: 'dataset not found: Not Found response.'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Dataset'
                example:
                  - bloggers:
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                    commented_per_post: 2002815683
                    id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                    liked_per_post: 1742085052
                    posts_per_blogger: 2076719602
                    status: 6
                    title: Excepturi nihil illo.
                  - bloggers:
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                    commented_per_post: 2002815683
                    id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                    liked_per_post: 1742085052
                    posts_per_blogger: 2076719602
                    status: 6
                    title: Excepturi nihil illo.
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Dataset'
                example:
                  - bloggers:
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                    commented_per_post: 2002815683
                    id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                    liked_per_post: 1742085052
                    posts_per_blogger: 2076719602
                    status: 6
                    title: Excepturi nihil illo.
                  - bloggers:
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                    commented_per_post: 2002815683
                    id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                    liked_per_post: 1742085052
                    posts_per_blogger: 2076719602
                    status: 6
                    title: Excepturi nihil illo.
                  - bloggers:
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                      - dataset_id: 76FB876C-96AC-91E7-BD21-B0C2988DDF65
                        id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        is_initial: false
                        user_id: 2467489778041992473
                        username: Et inventore molestiae.
                    commented_per_post: 2002815683
                    id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                    liked_per_post: 1742085052
                    posts_per_blogger: 2076719602
                    status: 6
                    title: Excepturi nihil illo.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/datasets/{dataset_id}/:
    get:
      tags:
        - datasets_service
      summary: get dataset datasets_service
      description: получить задачу по id
      operationId: datasets_service#get dataset
      parameters:
        - name: dataset_id
          in: path
          description: id задачи
          required: true
          schema:
            type: string
            description: id задачи
            example: Atque repudiandae voluptas minus voluptatem sed laborum.
          example: Architecto illum.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dataset'
              example:
                bloggers:
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: true
                    user_id: 3396955594930387235
                    username: Eos voluptate dolor assumenda.
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: true
                    user_id: 3396955594930387235
                    username: Eos voluptate dolor assumenda.
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: true
                    user_id: 3396955594930387235
                    username: Eos voluptate dolor assumenda.
                commented_per_post: 1587063343
                id: 5E3B665E-1239-9C12-9643-FFC1E6C04697
                liked_per_post: 1558805361
                posts_per_blogger: 881898396
                status: 4
                title: Quod qui saepe.
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Iste commodi enim quo quo sit et.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dataset'
        "404":
          description: 'dataset not found: Not Found response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dataset'
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Odio excepturi cum error doloremque error harum.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
    put:
      tags:
        - datasets_service
      summary: update dataset datasets_service
      description: |-
        обновить информацию о задаче. Не меняет статус задачи, можно вызывать сколько угодно раз.
        			Нельзя вызвать для задачи, которая уже выполняется, для этого надо сначала остановить выполнение.
      operationId: datasets_service#update dataset
      parameters:
        - name: dataset_id
          in: path
          description: id задачи, которую хотим обновить
          required: true
          schema:
            type: string
            description: id задачи, которую хотим обновить
            example: Minima non quia est ipsam numquam ab.
          example: Exercitationem voluptatem.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDatasetRequestBody'
            example:
              commented_per_post: 17144541818468990168
              liked_per_post: 1234718394506119178
              original_accounts:
                - Odio repellat occaecati aut.
                - Error doloribus.
                - Minus eum voluptatum dignissimos.
              phone_code: 7
              posts_per_blogger: 3727743447371436444
              title: Nam aliquid ut corrupti nam non.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dataset'
              example:
                bloggers:
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: true
                    user_id: 3396955594930387235
                    username: Eos voluptate dolor assumenda.
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: true
                    user_id: 3396955594930387235
                    username: Eos voluptate dolor assumenda.
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: true
                    user_id: 3396955594930387235
                    username: Eos voluptate dolor assumenda.
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: true
                    user_id: 3396955594930387235
                    username: Eos voluptate dolor assumenda.
                commented_per_post: 700010426
                id: 2C91774A-6D4A-67B6-DC43-6AED849DACC1
                liked_per_post: 1537009460
                posts_per_blogger: 820842255
                status: 3
                title: Porro velit labore.
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Voluptate non sapiente odio.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dataset'
        "404":
          description: 'dataset not found: Not Found response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dataset'
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Modi praesentium autem maxime.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/datasets/{dataset_id}/parse/:
    post:
      tags:
        - datasets_service
      summary: parse dataset datasets_service
      description: получить базу доноров для выбранных блогеров
      operationId: datasets_service#parse dataset
      parameters:
        - name: dataset_id
          in: path
          description: id задачи
          required: true
          schema:
            type: string
            description: id задачи
            example: Quam soluta illo.
          example: Voluptatem eius incidunt et.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParseDatasetOKResponseBody'
              example:
                dataset_id: Quo officiis omnis nihil autem aspernatur.
                status: 2
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParseDatasetOKResponseBody'
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParseDatasetOKResponseBody'
        "404":
          description: 'dataset not found: Not Found response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParseDatasetOKResponseBody'
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Eos fuga dolor itaque dolores aut.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/datasets/{dataset_id}/parsing_progress/:
    get:
      tags:
        - datasets_service
      summary: get parsing progress datasets_service
      description: 'получить статус выполнения парсинга аккаунтов '
      operationId: datasets_service#get parsing progress
      parameters:
        - name: dataset_id
          in: path
          description: id задачи
          required: true
          schema:
            type: string
            description: id задачи
            example: Tenetur cumque totam enim ea aut neque.
          example: Dolore quod.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParsingProgress'
              example:
                bloggers_parsed: 6821685042825604698
                done: true
                targets_saved: 4800857605870124209
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Cupiditate suscipit explicabo neque laudantium doloremque.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParsingProgress'
        "404":
          description: 'dataset not found: Not Found response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParsingProgress'
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Ex deserunt repellat.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/datasets/{dataset_id}/progress/:
    get:
      tags:
        - datasets_service
      summary: get progress datasets_service
      description: получить статус выполнения поиска похожих аккаунтов по айди датасета
      operationId: datasets_service#get progress
      parameters:
        - name: dataset_id
          in: path
          description: id задачи
          required: true
          schema:
            type: string
            description: id задачи
            example: Commodi nesciunt fugiat.
          example: Aperiam recusandae aspernatur est repudiandae voluptatibus qui.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetProgress'
              example:
                bloggers:
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: true
                    user_id: 3396955594930387235
                    username: Eos voluptate dolor assumenda.
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: true
                    user_id: 3396955594930387235
                    username: Eos voluptate dolor assumenda.
                done: true
                filtered_bloggers: 2032893028617859801
                initial_bloggers: 4464905760620963785
                new_bloggers: 344984773560843185
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Et quia.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetProgress'
        "404":
          description: 'dataset not found: Not Found response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetProgress'
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Quo sed quisquam quo et sint aperiam.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/datasets/{dataset_id}/start/:
    post:
      tags:
        - datasets_service
      summary: find similar datasets_service
      description: 'начать выполнение задачи '
      operationId: datasets_service#find similar
      parameters:
        - name: dataset_id
          in: path
          description: id задачи
          required: true
          schema:
            type: string
            description: id задачи
            example: Fugiat modi autem reiciendis enim.
          example: Vel nam.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dataset'
              example:
                bloggers:
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: true
                    user_id: 3396955594930387235
                    username: Eos voluptate dolor assumenda.
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: true
                    user_id: 3396955594930387235
                    username: Eos voluptate dolor assumenda.
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: true
                    user_id: 3396955594930387235
                    username: Eos voluptate dolor assumenda.
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: true
                    user_id: 3396955594930387235
                    username: Eos voluptate dolor assumenda.
                commented_per_post: 36062723
                id: 773F4E7F-A748-DF6D-4355-233071D2534A
                liked_per_post: 1253534538
                posts_per_blogger: 801589574
                status: 6
                title: At nesciunt sint placeat ipsam ducimus.
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dataset'
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dataset'
        "404":
          description: 'dataset not found: Not Found response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dataset'
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Veniam quo aliquam et magnam ratione numquam.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/datasets/draft/:
    post:
      tags:
        - datasets_service
      summary: create dataset draft datasets_service
      description: создать драфт задачи
      operationId: datasets_service#create dataset draft
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: string
                description: dataset_id для созданной задачи
                example: 0866BAED-0A78-C310-5523-F8F1C3A1D14C
                format: uuid
              example: 86EDFB6E-94F4-2B51-2B7E-E4683F848FD6
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Quis excepturi.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                type: string
                description: dataset_id для созданной задачи
                example: D027EA19-1014-886E-F650-7C507090065C
                format: uuid
        "404":
          description: 'dataset not found: Not Found response.'
          content:
            application/json:
              schema:
                type: string
                description: dataset_id для созданной задачи
                example: 08881150-0EBF-0710-C5E8-0B82D2C9C671
                format: uuid
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Praesentium pariatur nulla rerum consequatur.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
components:
  schemas:
    Blogger:
      type: object
      properties:
        dataset_id:
          type: string
          description: айди датасета, к которому принадлежит блоггер
          example: 3E620E27-EED0-3E38-87CD-C7C87D512815
          format: uuid
        id:
          type: string
          example: 84858054-1B69-3E9A-C82B-BF11FF33B1D8
          format: uuid
        is_initial:
          type: boolean
          description: является ли блоггер изначально в датасете или появился при парсинге
          example: true
        user_id:
          type: integer
          description: user_id в инстаграме, -1 если неизвестен
          example: 8916723230635603425
          format: int64
        username:
          type: string
          description: имя аккаунта в инстаграме
          example: Dolore sed sit.
      example:
        dataset_id: 45442A02-3FD6-C827-BA11-864B7D92257A
        id: BD3BFBE7-02F2-99D7-D026-8BD77E75C122
        is_initial: false
        user_id: 1582128747492642008
        username: Commodi dignissimos vel.
      required:
        - id
        - dataset_id
        - username
        - is_initial
        - user_id
    Dataset:
      type: object
      properties:
        bloggers:
          type: array
          items:
            $ref: '#/components/schemas/Blogger'
          example:
            - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
              id: 74C53540-E974-ABFF-2565-6BF99F9017B2
              is_initial: true
              user_id: 3396955594930387235
              username: Eos voluptate dolor assumenda.
            - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
              id: 74C53540-E974-ABFF-2565-6BF99F9017B2
              is_initial: true
              user_id: 3396955594930387235
              username: Eos voluptate dolor assumenda.
            - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
              id: 74C53540-E974-ABFF-2565-6BF99F9017B2
              is_initial: true
              user_id: 3396955594930387235
              username: Eos voluptate dolor assumenda.
            - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
              id: 74C53540-E974-ABFF-2565-6BF99F9017B2
              is_initial: true
              user_id: 3396955594930387235
              username: Eos voluptate dolor assumenda.
        commented_per_post:
          type: integer
          description: сколько прокоментировааших для каждого поста брать
          example: 1071257635
          format: int32
        id:
          type: string
          example: 1A24D89F-A0EE-4671-E9C1-CE63E054B707
          format: uuid
        liked_per_post:
          type: integer
          description: сколько лайкнувших для каждого поста брать
          example: 133810726
          format: int32
        posts_per_blogger:
          type: integer
          description: имена аккаунтов, для которых ищем похожих
          example: 1994100323
          format: int32
        status:
          type: integer
          example: 6
          enum:
            - 1
            - 2
            - 3
            - 4
            - 5
            - 6
        title:
          type: string
          description: название задачи
          example: Debitis ex qui.
      example:
        bloggers:
          - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
            id: 74C53540-E974-ABFF-2565-6BF99F9017B2
            is_initial: true
            user_id: 3396955594930387235
            username: Eos voluptate dolor assumenda.
          - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
            id: 74C53540-E974-ABFF-2565-6BF99F9017B2
            is_initial: true
            user_id: 3396955594930387235
            username: Eos voluptate dolor assumenda.
          - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
            id: 74C53540-E974-ABFF-2565-6BF99F9017B2
            is_initial: true
            user_id: 3396955594930387235
            username: Eos voluptate dolor assumenda.
        commented_per_post: 262253218
        id: 2E7D48F1-CD94-6874-B6D8-717D4A8FD873
        liked_per_post: 1801040334
        posts_per_blogger: 2024460772
        status: 3
        title: Voluptatem provident possimus voluptas voluptatem quaerat fugiat.
      required:
        - id
        - bloggers
        - status
        - title
        - posts_per_blogger
        - liked_per_post
        - commented_per_post
    DatasetProgress:
      type: object
      properties:
        bloggers:
          type: array
          items:
            $ref: '#/components/schemas/Blogger'
          description: блогеры, которых уже нашли
          example:
            - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
              id: 74C53540-E974-ABFF-2565-6BF99F9017B2
              is_initial: true
              user_id: 3396955594930387235
              username: Eos voluptate dolor assumenda.
            - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
              id: 74C53540-E974-ABFF-2565-6BF99F9017B2
              is_initial: true
              user_id: 3396955594930387235
              username: Eos voluptate dolor assumenda.
            - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
              id: 74C53540-E974-ABFF-2565-6BF99F9017B2
              is_initial: true
              user_id: 3396955594930387235
              username: Eos voluptate dolor assumenda.
        done:
          type: boolean
          description: закончена ли задача
          example: false
        filtered_bloggers:
          type: integer
          description: количество блогеров, которые проходят проверку по коду региона
          example: 9110738500897642904
          format: int64
        initial_bloggers:
          type: integer
          description: количество блогеров, которые были изначально
          example: 770760069430203798
          format: int64
        new_bloggers:
          type: integer
          description: количество блогеров, которых нашли
          example: 24810825125778825
          format: int64
      example:
        bloggers:
          - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
            id: 74C53540-E974-ABFF-2565-6BF99F9017B2
            is_initial: true
            user_id: 3396955594930387235
            username: Eos voluptate dolor assumenda.
          - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
            id: 74C53540-E974-ABFF-2565-6BF99F9017B2
            is_initial: true
            user_id: 3396955594930387235
            username: Eos voluptate dolor assumenda.
          - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
            id: 74C53540-E974-ABFF-2565-6BF99F9017B2
            is_initial: true
            user_id: 3396955594930387235
            username: Eos voluptate dolor assumenda.
        done: true
        filtered_bloggers: 7912382658610814647
        initial_bloggers: 8733047271586894608
        new_bloggers: 2861227184345395978
      required:
        - bloggers
        - initial_bloggers
        - new_bloggers
        - filtered_bloggers
        - done
    ParseDatasetOKResponseBody:
      type: object
      properties:
        dataset_id:
          type: string
          description: id задачи
          example: Incidunt possimus autem.
        status:
          type: integer
          example: 3
          enum:
            - 1
            - 2
            - 3
            - 4
            - 5
            - 6
      example:
        dataset_id: Est iste.
        status: 4
      required:
        - dataset_id
        - status
    ParsingProgress:
      type: object
      properties:
        bloggers_parsed:
          type: integer
          description: количество блогеров, у которых спарсили пользователей
          example: 6202357078758524907
          format: int64
        done:
          type: boolean
          description: закончен ли парсинг блогеров
          example: true
        targets_saved:
          type: integer
          description: количество сохраненных доноров
          example: 4794414539822332023
          format: int64
      example:
        bloggers_parsed: 2705002944627314639
        done: true
        targets_saved: 892073411133051054
      required:
        - bloggers_parsed
        - targets_saved
        - done
    UpdateDatasetRequestBody:
      type: object
      properties:
        commented_per_post:
          type: integer
          description: сколько прокоментировааших для каждого поста брать
          example: 9419388202506810221
        liked_per_post:
          type: integer
          description: сколько лайкнувших для каждого поста брать
          example: 1202847920377117317
        original_accounts:
          type: array
          items:
            type: string
            example: Et porro error iste praesentium iure et.
          description: имена аккаунтов, для которых ищем похожих
          example:
            - Est dolorem sed quo et et maiores.
            - Voluptas voluptas quidem iste.
            - Ea occaecati ipsum odit.
        phone_code:
          type: integer
          description: код региона, по которому будем сортировать
          example: 7
          minimum: 1
          maximum: 1000
        posts_per_blogger:
          type: integer
          description: имена аккаунтов, для которых ищем похожих
          example: 2728869132680424709
        title:
          type: string
          description: название задачи
          example: Laboriosam autem voluptates quam voluptas vero.
      example:
        commented_per_post: 6208578701000148507
        liked_per_post: 14272633746513473269
        original_accounts:
          - Ratione harum.
          - Velit aut.
          - Quis sunt debitis rem.
        phone_code: 7
        posts_per_blogger: 6982182579760512513
        title: Quidem non accusantium.
  securitySchemes:
    jwt_header_Authorization:
      type: http
      description: Secures endpoint by requiring a valid JWT token retrieved via the signin endpoint. Supports scopes "api:read" and "api:write".
      scheme: bearer
tags:
  - name: datasets_service
    description: сервис для создания, редактирования и работы с задачами (рекламными компаниями)
