openapi: 3.0.3
info:
  title: REST api for simple route app
  version: "1.0"
servers:
  - url: /
    description: Default server for rest-api
paths:
  /api/datasets/:
    get:
      tags:
        - datasets_service
      summary: list datasets datasets_service
      description: получить все задачи для текущего пользователя
      operationId: datasets_service#list datasets
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Dataset'
                example:
                  - bloggers:
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                    commented_per_post: 431342242
                    id: 5E3B665E-1239-9C12-9643-FFC1E6C04697
                    liked_per_post: 502732901
                    posts_per_blogger: 417311772
                    status: 6
                    title: Enim et assumenda blanditiis nihil exercitationem.
                  - bloggers:
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                    commented_per_post: 431342242
                    id: 5E3B665E-1239-9C12-9643-FFC1E6C04697
                    liked_per_post: 502732901
                    posts_per_blogger: 417311772
                    status: 6
                    title: Enim et assumenda blanditiis nihil exercitationem.
              example:
                - bloggers:
                    - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                      is_initial: false
                      user_id: 2455906903059462355
                      username: Velit optio quod rerum aut blanditiis.
                    - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                      is_initial: false
                      user_id: 2455906903059462355
                      username: Velit optio quod rerum aut blanditiis.
                    - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                      is_initial: false
                      user_id: 2455906903059462355
                      username: Velit optio quod rerum aut blanditiis.
                  commented_per_post: 431342242
                  id: 5E3B665E-1239-9C12-9643-FFC1E6C04697
                  liked_per_post: 502732901
                  posts_per_blogger: 417311772
                  status: 6
                  title: Enim et assumenda blanditiis nihil exercitationem.
                - bloggers:
                    - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                      is_initial: false
                      user_id: 2455906903059462355
                      username: Velit optio quod rerum aut blanditiis.
                    - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                      is_initial: false
                      user_id: 2455906903059462355
                      username: Velit optio quod rerum aut blanditiis.
                    - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                      is_initial: false
                      user_id: 2455906903059462355
                      username: Velit optio quod rerum aut blanditiis.
                  commented_per_post: 431342242
                  id: 5E3B665E-1239-9C12-9643-FFC1E6C04697
                  liked_per_post: 502732901
                  posts_per_blogger: 417311772
                  status: 6
                  title: Enim et assumenda blanditiis nihil exercitationem.
                - bloggers:
                    - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                      is_initial: false
                      user_id: 2455906903059462355
                      username: Velit optio quod rerum aut blanditiis.
                    - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                      is_initial: false
                      user_id: 2455906903059462355
                      username: Velit optio quod rerum aut blanditiis.
                    - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                      id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                      is_initial: false
                      user_id: 2455906903059462355
                      username: Velit optio quod rerum aut blanditiis.
                  commented_per_post: 431342242
                  id: 5E3B665E-1239-9C12-9643-FFC1E6C04697
                  liked_per_post: 502732901
                  posts_per_blogger: 417311772
                  status: 6
                  title: Enim et assumenda blanditiis nihil exercitationem.
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Necessitatibus sed omnis est.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Dataset'
                example:
                  - bloggers:
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                    commented_per_post: 431342242
                    id: 5E3B665E-1239-9C12-9643-FFC1E6C04697
                    liked_per_post: 502732901
                    posts_per_blogger: 417311772
                    status: 6
                    title: Enim et assumenda blanditiis nihil exercitationem.
                  - bloggers:
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                    commented_per_post: 431342242
                    id: 5E3B665E-1239-9C12-9643-FFC1E6C04697
                    liked_per_post: 502732901
                    posts_per_blogger: 417311772
                    status: 6
                    title: Enim et assumenda blanditiis nihil exercitationem.
        "404":
          description: 'dataset not found: Not Found response.'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Dataset'
                example:
                  - bloggers:
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                    commented_per_post: 431342242
                    id: 5E3B665E-1239-9C12-9643-FFC1E6C04697
                    liked_per_post: 502732901
                    posts_per_blogger: 417311772
                    status: 6
                    title: Enim et assumenda blanditiis nihil exercitationem.
                  - bloggers:
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                    commented_per_post: 431342242
                    id: 5E3B665E-1239-9C12-9643-FFC1E6C04697
                    liked_per_post: 502732901
                    posts_per_blogger: 417311772
                    status: 6
                    title: Enim et assumenda blanditiis nihil exercitationem.
                  - bloggers:
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                    commented_per_post: 431342242
                    id: 5E3B665E-1239-9C12-9643-FFC1E6C04697
                    liked_per_post: 502732901
                    posts_per_blogger: 417311772
                    status: 6
                    title: Enim et assumenda blanditiis nihil exercitationem.
                  - bloggers:
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                    commented_per_post: 431342242
                    id: 5E3B665E-1239-9C12-9643-FFC1E6C04697
                    liked_per_post: 502732901
                    posts_per_blogger: 417311772
                    status: 6
                    title: Enim et assumenda blanditiis nihil exercitationem.
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Dataset'
                example:
                  - bloggers:
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                    commented_per_post: 431342242
                    id: 5E3B665E-1239-9C12-9643-FFC1E6C04697
                    liked_per_post: 502732901
                    posts_per_blogger: 417311772
                    status: 6
                    title: Enim et assumenda blanditiis nihil exercitationem.
                  - bloggers:
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                      - dataset_id: 7D80331A-7620-D09D-7CCB-2EF87B797732
                        id: 1265498D-5A84-134A-1C7A-ED5B4B92788E
                        is_initial: false
                        user_id: 2455906903059462355
                        username: Velit optio quod rerum aut blanditiis.
                    commented_per_post: 431342242
                    id: 5E3B665E-1239-9C12-9643-FFC1E6C04697
                    liked_per_post: 502732901
                    posts_per_blogger: 417311772
                    status: 6
                    title: Enim et assumenda blanditiis nihil exercitationem.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/datasets/{dataset_id}/:
    get:
      tags:
        - datasets_service
      summary: get dataset datasets_service
      description: получить задачу по id
      operationId: datasets_service#get dataset
      parameters:
        - name: dataset_id
          in: path
          description: id задачи
          required: true
          schema:
            type: string
            description: id задачи
            example: Pariatur laudantium cum natus.
          example: Quia ipsum suscipit rerum eos.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dataset'
              example:
                bloggers:
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: false
                    user_id: 6517268191477979916
                    username: Veritatis adipisci tenetur illo aut.
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: false
                    user_id: 6517268191477979916
                    username: Veritatis adipisci tenetur illo aut.
                commented_per_post: 1341672586
                id: 773F4E7F-A748-DF6D-4355-233071D2534A
                liked_per_post: 1578290747
                posts_per_blogger: 1608836625
                status: 4
                title: Nam quis quaerat exercitationem.
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Sunt rerum saepe.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dataset'
        "404":
          description: 'dataset not found: Not Found response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dataset'
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Blanditiis molestias error.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
    put:
      tags:
        - datasets_service
      summary: update dataset datasets_service
      description: |-
        обновить информацию о задаче. Не меняет статус задачи, можно вызывать сколько угодно раз.
        			Нельзя вызвать для задачи, которая уже выполняется, для этого надо сначала остановить выполнение.
      operationId: datasets_service#update dataset
      parameters:
        - name: dataset_id
          in: path
          description: id задачи, которую хотим обновить
          required: true
          schema:
            type: string
            description: id задачи, которую хотим обновить
            example: Incidunt neque doloribus.
          example: In consequuntur officiis eos temporibus enim sequi.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDatasetRequestBody'
            example:
              commented_per_post: 8150104160837447229
              liked_per_post: 8529162602553131573
              original_accounts:
                - Quisquam enim quisquam dolor.
                - Quaerat est sequi quis eum adipisci.
              phone_code: 7
              posts_per_blogger: 4724980262041109318
              title: Voluptatem maxime.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dataset'
              example:
                bloggers:
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: false
                    user_id: 6517268191477979916
                    username: Veritatis adipisci tenetur illo aut.
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: false
                    user_id: 6517268191477979916
                    username: Veritatis adipisci tenetur illo aut.
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: false
                    user_id: 6517268191477979916
                    username: Veritatis adipisci tenetur illo aut.
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: false
                    user_id: 6517268191477979916
                    username: Veritatis adipisci tenetur illo aut.
                commented_per_post: 1567336055
                id: 2C91774A-6D4A-67B6-DC43-6AED849DACC1
                liked_per_post: 1373711134
                posts_per_blogger: 1509602036
                status: 2
                title: Libero voluptate voluptatum alias ullam.
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Sit ad officia error esse eos.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dataset'
        "404":
          description: 'dataset not found: Not Found response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dataset'
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Dignissimos nulla sit iure velit.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/datasets/{dataset_id}/parse/:
    post:
      tags:
        - datasets_service
      summary: parse dataset datasets_service
      description: получить базу доноров для выбранных блогеров
      operationId: datasets_service#parse dataset
      parameters:
        - name: dataset_id
          in: path
          description: id задачи
          required: true
          schema:
            type: string
            description: id задачи
            example: Aut sunt dolorum.
          example: Laborum atque alias et culpa consequatur.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParseDatasetOKResponseBody'
              example:
                dataset_id: Ad optio consequatur.
                status: 6
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParseDatasetOKResponseBody'
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParseDatasetOKResponseBody'
        "404":
          description: 'dataset not found: Not Found response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParseDatasetOKResponseBody'
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Quasi voluptatem sint id tempora ea.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/datasets/{dataset_id}/parsing_progress/:
    get:
      tags:
        - datasets_service
      summary: get parsing progress datasets_service
      description: 'получить статус выполнения парсинга аккаунтов '
      operationId: datasets_service#get parsing progress
      parameters:
        - name: dataset_id
          in: path
          description: id задачи
          required: true
          schema:
            type: string
            description: id задачи
            example: Quia ea sed quia.
          example: Voluptatem quasi qui dolor deleniti.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParsingProgress'
              example:
                bloggers_parsed: 903273408638343134
                done: false
                targets_saved: 3105141226110593161
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Et nesciunt cum molestias ullam.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParsingProgress'
        "404":
          description: 'dataset not found: Not Found response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParsingProgress'
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Alias error adipisci est aliquam qui natus.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/datasets/{dataset_id}/progress/:
    get:
      tags:
        - datasets_service
      summary: get progress datasets_service
      description: получить статус выполнения поиска похожих аккаунтов по айди датасета
      operationId: datasets_service#get progress
      parameters:
        - name: dataset_id
          in: path
          description: id задачи
          required: true
          schema:
            type: string
            description: id задачи
            example: Illo tempore cumque explicabo quaerat.
          example: Reiciendis temporibus voluptas rerum explicabo quia numquam.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetProgress'
              example:
                bloggers:
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: false
                    user_id: 6517268191477979916
                    username: Veritatis adipisci tenetur illo aut.
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: false
                    user_id: 6517268191477979916
                    username: Veritatis adipisci tenetur illo aut.
                done: true
                filtered_bloggers: 8163913208883442780
                initial_bloggers: 6940211590439773124
                new_bloggers: 2761799592145712309
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Et ut culpa cumque.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetProgress'
        "404":
          description: 'dataset not found: Not Found response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetProgress'
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Sint amet.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/datasets/{dataset_id}/start/:
    post:
      tags:
        - datasets_service
      summary: find similar datasets_service
      description: 'начать выполнение задачи '
      operationId: datasets_service#find similar
      parameters:
        - name: dataset_id
          in: path
          description: id задачи
          required: true
          schema:
            type: string
            description: id задачи
            example: Dolores veritatis excepturi dolore dolorem corporis fugit.
          example: Temporibus perspiciatis enim ipsum odit velit.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindSimilarOKResponseBody'
              example:
                bloggers:
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: false
                    user_id: 6517268191477979916
                    username: Veritatis adipisci tenetur illo aut.
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: false
                    user_id: 6517268191477979916
                    username: Veritatis adipisci tenetur illo aut.
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: false
                    user_id: 6517268191477979916
                    username: Veritatis adipisci tenetur illo aut.
                  - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                    id: 74C53540-E974-ABFF-2565-6BF99F9017B2
                    is_initial: false
                    user_id: 6517268191477979916
                    username: Veritatis adipisci tenetur illo aut.
                dataset_id: Maxime necessitatibus deserunt eum ea.
                status: 1
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindSimilarOKResponseBody'
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindSimilarOKResponseBody'
        "404":
          description: 'dataset not found: Not Found response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindSimilarOKResponseBody'
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Est eius delectus dicta.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/datasets/draft/:
    post:
      tags:
        - datasets_service
      summary: create dataset draft datasets_service
      description: создать драфт задачи
      operationId: datasets_service#create dataset draft
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: string
                description: dataset_id для созданной задачи
                example: 35814117-F834-9FAB-0A03-DB6E91CE1F7F
                format: uuid
              example: EBC096AD-D9EC-2F9C-CCD5-2819684939D3
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Et accusamus aperiam repellendus voluptate.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                type: string
                description: dataset_id для созданной задачи
                example: 5D93A99A-535C-03BB-87BD-865144549E25
                format: uuid
        "404":
          description: 'dataset not found: Not Found response.'
          content:
            application/json:
              schema:
                type: string
                description: dataset_id для созданной задачи
                example: E6770800-709B-577A-95B9-5007000379C3
                format: uuid
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Ut sapiente asperiores id.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
components:
  schemas:
    Blogger:
      type: object
      properties:
        dataset_id:
          type: string
          description: айди датасета, к которому принадлежит блоггер
          example: 8B791A71-1C43-AB9B-4366-12192353E1A2
          format: uuid
        id:
          type: string
          example: 6E989AEF-9C11-4862-D8B1-5CFC4F6414E0
          format: uuid
        is_initial:
          type: boolean
          description: является ли блоггер изначально в датасете или появился при парсинге
          example: false
        user_id:
          type: integer
          description: user_id в инстаграме, -1 если неизвестен
          example: 6787605913328004226
          format: int64
        username:
          type: string
          description: имя аккаунта в инстаграме
          example: Ipsum repellendus laborum.
      example:
        dataset_id: 799C598D-49D1-F53A-0ED6-818482028C45
        id: A1E767AB-DA97-F23F-D106-18BF8653EB6C
        is_initial: false
        user_id: 4772604901417637598
        username: Ut ratione nemo eius.
      required:
        - id
        - dataset_id
        - username
        - is_initial
        - user_id
    Dataset:
      type: object
      properties:
        bloggers:
          type: array
          items:
            $ref: '#/components/schemas/Blogger'
          example:
            - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
              id: 74C53540-E974-ABFF-2565-6BF99F9017B2
              is_initial: false
              user_id: 6517268191477979916
              username: Veritatis adipisci tenetur illo aut.
            - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
              id: 74C53540-E974-ABFF-2565-6BF99F9017B2
              is_initial: false
              user_id: 6517268191477979916
              username: Veritatis adipisci tenetur illo aut.
            - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
              id: 74C53540-E974-ABFF-2565-6BF99F9017B2
              is_initial: false
              user_id: 6517268191477979916
              username: Veritatis adipisci tenetur illo aut.
            - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
              id: 74C53540-E974-ABFF-2565-6BF99F9017B2
              is_initial: false
              user_id: 6517268191477979916
              username: Veritatis adipisci tenetur illo aut.
        commented_per_post:
          type: integer
          description: сколько прокоментировааших для каждого поста брать
          example: 683583086
          format: int32
        id:
          type: string
          example: 6BD40BD6-7AF6-FB4E-C1C1-23700A0E68DE
          format: uuid
        liked_per_post:
          type: integer
          description: сколько лайкнувших для каждого поста брать
          example: 564862941
          format: int32
        posts_per_blogger:
          type: integer
          description: имена аккаунтов, для которых ищем похожих
          example: 1535935082
          format: int32
        status:
          type: integer
          example: 6
          enum:
            - 1
            - 2
            - 3
            - 4
            - 5
            - 6
        title:
          type: string
          description: название задачи
          example: Odio quia aliquid voluptates quae et.
      example:
        bloggers:
          - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
            id: 74C53540-E974-ABFF-2565-6BF99F9017B2
            is_initial: false
            user_id: 6517268191477979916
            username: Veritatis adipisci tenetur illo aut.
          - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
            id: 74C53540-E974-ABFF-2565-6BF99F9017B2
            is_initial: false
            user_id: 6517268191477979916
            username: Veritatis adipisci tenetur illo aut.
          - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
            id: 74C53540-E974-ABFF-2565-6BF99F9017B2
            is_initial: false
            user_id: 6517268191477979916
            username: Veritatis adipisci tenetur illo aut.
          - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
            id: 74C53540-E974-ABFF-2565-6BF99F9017B2
            is_initial: false
            user_id: 6517268191477979916
            username: Veritatis adipisci tenetur illo aut.
        commented_per_post: 401137542
        id: D16B2ED1-3971-5178-0135-F3E819F3BA4F
        liked_per_post: 918285950
        posts_per_blogger: 116643595
        status: 3
        title: Dicta eligendi.
      required:
        - id
        - bloggers
        - status
        - title
        - posts_per_blogger
        - liked_per_post
        - commented_per_post
    DatasetProgress:
      type: object
      properties:
        bloggers:
          type: array
          items:
            $ref: '#/components/schemas/Blogger'
          description: блогеры, которых уже нашли
          example:
            - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
              id: 74C53540-E974-ABFF-2565-6BF99F9017B2
              is_initial: false
              user_id: 6517268191477979916
              username: Veritatis adipisci tenetur illo aut.
            - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
              id: 74C53540-E974-ABFF-2565-6BF99F9017B2
              is_initial: false
              user_id: 6517268191477979916
              username: Veritatis adipisci tenetur illo aut.
            - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
              id: 74C53540-E974-ABFF-2565-6BF99F9017B2
              is_initial: false
              user_id: 6517268191477979916
              username: Veritatis adipisci tenetur illo aut.
            - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
              id: 74C53540-E974-ABFF-2565-6BF99F9017B2
              is_initial: false
              user_id: 6517268191477979916
              username: Veritatis adipisci tenetur illo aut.
        done:
          type: boolean
          description: закончена ли задача
          example: true
        filtered_bloggers:
          type: integer
          description: количество блогеров, которые проходят проверку по коду региона
          example: 8649771176073567833
          format: int64
        initial_bloggers:
          type: integer
          description: количество блогеров, которые были изначально
          example: 5887420417474125223
          format: int64
        new_bloggers:
          type: integer
          description: количество блогеров, которых нашли
          example: 2084373989443416412
          format: int64
      example:
        bloggers:
          - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
            id: 74C53540-E974-ABFF-2565-6BF99F9017B2
            is_initial: false
            user_id: 6517268191477979916
            username: Veritatis adipisci tenetur illo aut.
          - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
            id: 74C53540-E974-ABFF-2565-6BF99F9017B2
            is_initial: false
            user_id: 6517268191477979916
            username: Veritatis adipisci tenetur illo aut.
        done: true
        filtered_bloggers: 5822890421273294230
        initial_bloggers: 4013040591179462878
        new_bloggers: 7589150465542947532
      required:
        - bloggers
        - initial_bloggers
        - new_bloggers
        - filtered_bloggers
    FindSimilarOKResponseBody:
      type: object
      properties:
        bloggers:
          type: array
          items:
            $ref: '#/components/schemas/Blogger'
          example:
            - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
              id: 74C53540-E974-ABFF-2565-6BF99F9017B2
              is_initial: false
              user_id: 6517268191477979916
              username: Veritatis adipisci tenetur illo aut.
            - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
              id: 74C53540-E974-ABFF-2565-6BF99F9017B2
              is_initial: false
              user_id: 6517268191477979916
              username: Veritatis adipisci tenetur illo aut.
            - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
              id: 74C53540-E974-ABFF-2565-6BF99F9017B2
              is_initial: false
              user_id: 6517268191477979916
              username: Veritatis adipisci tenetur illo aut.
        dataset_id:
          type: string
          description: id задачи
          example: Reiciendis praesentium consequatur et quis molestiae.
        status:
          type: integer
          example: 1
          enum:
            - 1
            - 2
            - 3
            - 4
            - 5
            - 6
      example:
        bloggers:
          - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
            id: 74C53540-E974-ABFF-2565-6BF99F9017B2
            is_initial: false
            user_id: 6517268191477979916
            username: Veritatis adipisci tenetur illo aut.
          - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
            id: 74C53540-E974-ABFF-2565-6BF99F9017B2
            is_initial: false
            user_id: 6517268191477979916
            username: Veritatis adipisci tenetur illo aut.
          - dataset_id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
            id: 74C53540-E974-ABFF-2565-6BF99F9017B2
            is_initial: false
            user_id: 6517268191477979916
            username: Veritatis adipisci tenetur illo aut.
        dataset_id: Quis dolor aut dolore ut debitis in.
        status: 3
      required:
        - dataset_id
        - status
        - bloggers
    ParseDatasetOKResponseBody:
      type: object
      properties:
        dataset_id:
          type: string
          description: id задачи
          example: Est expedita ut aut et consequatur voluptas.
        status:
          type: integer
          example: 2
          enum:
            - 1
            - 2
            - 3
            - 4
            - 5
            - 6
      example:
        dataset_id: Sed possimus illum.
        status: 4
      required:
        - dataset_id
        - status
    ParsingProgress:
      type: object
      properties:
        bloggers_parsed:
          type: integer
          description: количество блогеров, у которых спарсили пользователей
          example: 6829481047638781975
          format: int64
        done:
          type: boolean
          description: закончен ли парсинг блогеров
          example: false
        targets_saved:
          type: integer
          description: количество сохраненных доноров
          example: 1334183819142547407
          format: int64
      example:
        bloggers_parsed: 7107640881189090477
        done: true
        targets_saved: 6568726724724410624
      required:
        - bloggers_parsed
        - targets_saved
        - done
    UpdateDatasetRequestBody:
      type: object
      properties:
        commented_per_post:
          type: integer
          description: сколько прокоментировааших для каждого поста брать
          example: 17632000285557421196
        liked_per_post:
          type: integer
          description: сколько лайкнувших для каждого поста брать
          example: 13510370845343020799
        original_accounts:
          type: array
          items:
            type: string
            example: Cumque odio sit.
          description: имена аккаунтов, для которых ищем похожих
          example:
            - Vitae reiciendis velit culpa aut.
            - Enim et ducimus et sit.
            - Sed fugiat deserunt qui fuga ut pariatur.
            - Omnis veniam esse.
        phone_code:
          type: integer
          description: код региона, по которому будем сортировать
          example: 7
          minimum: 1
          maximum: 1000
        posts_per_blogger:
          type: integer
          description: имена аккаунтов, для которых ищем похожих
          example: 5322956294454124385
        title:
          type: string
          description: название задачи
          example: Dolores nihil laboriosam eos rerum amet.
      example:
        commented_per_post: 13481013770701538842
        liked_per_post: 13070013073317305464
        original_accounts:
          - Odit aliquam ut sit.
          - Atque adipisci.
          - Enim voluptatem culpa libero.
        phone_code: 7
        posts_per_blogger: 14247850107697984822
        title: Totam et qui.
  securitySchemes:
    jwt_header_Authorization:
      type: http
      description: Secures endpoint by requiring a valid JWT token retrieved via the signin endpoint. Supports scopes "api:read" and "api:write".
      scheme: bearer
tags:
  - name: datasets_service
    description: сервис для создания, редактирования и работы с задачами (рекламными компаниями)
